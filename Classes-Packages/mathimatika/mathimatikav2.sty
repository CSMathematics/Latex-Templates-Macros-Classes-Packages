\NeedsTeXFormat{LaTeX2e}
% --- ΠΡΟΤΑΣΗ: Τυποποιημένη μορφή ημερομηνίας ---
% Η συνιστώμενη μορφή για την ημερομηνία στο \ProvidesPackage είναι YYYY/MM/DD.
% Αυτό βοηθά στη συνεπή διαχείριση εκδόσεων.
\ProvidesPackage{mathimatika}[2025/10/04 Mathimatika Package]

%===============================================================================
% ΚΕΦΑΛΑΙΟ 1: ΦΟΡΤΩΣΗ ΠΑΚΕΤΩΝ (DEPENDENCIES)
%===============================================================================

% --- ΣΧΟΛΙΟ: Οργάνωση πακέτων ---
% Έχω ομαδοποιήσει τα πακέτα ανάλογα με τη λειτουργικότητά τους
% για καλύτερη αναγνωσιμότητα και συντήρηση του κώδικα.

% --- Γενικά Μαθηματικά & Σύμβολα ---
\RequirePackage{mathtools}      % Επεκτείνει το amsmath. Είναι καλή πρακτική να φορτώνεται αυτό.
\RequirePackage{extarrows}        % Για επεκτάσιμα βέλη και σύμβολα ισότητας (π.χ. \xlongequal).

% --- Συστήματα Εξισώσεων ---
\RequirePackage{systeme}

% --- Γραφικά & Διαγράμματα (TikZ/PGF) ---
\RequirePackage{tikz}
\RequirePackage{pgfplots}
\usetikzlibrary{intersections} % Προσθήκη για την εντολή \Miniskos
\RequirePackage{tkz-euclide}


% --- Προγραμματισμός & Υπολογισμοί (Για προχωρημένες εντολές) ---
\RequirePackage{xparse}           % Για τη δημιουργία προχωρημένων εντολών (\NewDocumentCommand).
\RequirePackage{environ}          % Για τη δημιουργία περιβαλλόντων.
% Πακέτα xint για πράξεις με μεγάλους αριθμούς
\RequirePackage{xint}
\RequirePackage{xintexpr}
\RequirePackage{xinttools}
\RequirePackage{xintfrac}
\RequirePackage{xlop}             % Για στοιχειοθεσία αριθμητικών πράξεων.

% --- Πίνακες & Στοιχειοθεσία ---
% --- ΔΙΟΡΘΩΣΗ: Αφαίρεση διπλότυπου πακέτου ---
% Το πακέτο 'array' καλούνταν δύο φορές. Το αφήνω μία φορά.
\RequirePackage{array}
\RequirePackage{hhline}
\RequirePackage{numprint}         % Για τη μορφοποίηση αριθμών (π.χ. διαχωριστικό χιλιάδων).
\RequirePackage{colortbl}         % Για το \cellcolor στο σχήμα Horner


%===============================================================================
% ΚΕΦΑΛΑΙΟ 2: ΣΥΣΤΗΜΑΤΑ ΕΞΙΣΩΣΕΩΝ
%===============================================================================

%-------------------------------------------------------------------------------
% \csysteme: Μια παραλλαγή της \systeme με μη-επεκτάσιμη αγκύλη
%-------------------------------------------------------------------------------
\NewDocumentCommand{\csysteme}{som}{%
  \LEFTRIGHT\{.{%
    \sysdelim..
    \IfBooleanTF{#1}
     {\IfNoValueTF{#2}{\systeme*{#3}}{\systeme*[#2]{#3}}}
     {\IfNoValueTF{#2}{\systeme{#3}}{\systeme[#2]{#3}}}%
  }%
}
\let\SystemeFixedBrace\csysteme

%-------------------------------------------------------------------------------
% \synt, \syntd: Βοηθητικές εντολές (πιθανόν για συντελεστές)
%-------------------------------------------------------------------------------
\newcommand{\synt}[2]{{\scriptsize \begin{matrix}
\times#1\\\\ \times#2
\end{matrix}}}
\newcommand{\syntd}[2]{{\scriptsize \begin{matrix}
:#1\\\\ :#2
\end{matrix}}}
\let\syntMult\synt
\let\syntDiv\syntd

%===============================================================================
% ΚΕΦΑΛΑΙΟ 3: ΜΙΚΡΟ-ΡΥΘΜΙΣΕΙΣ ΜΑΘΗΜΑΤΙΚΗΣ ΣΤΟΙΧΕΙΟΘΕΣΙΑΣ
%===============================================================================

%-------------------------------------------------------------------------------
% ΜΗΚΟΣ ΓΡΑΜΜΗΣ ΚΛΑΣΜΑΤΟΣ
%-------------------------------------------------------------------------------
\DeclareRobustCommand{\frac}[3][0pt]{%
{\begroup\hspace{#1}#2\hspace{#1}\endgroup\over\hspace{#1}#3\hspace{#1}}}

\NewDocumentCommand{\paddedfrac}{O{2pt}mm}{%
  \frac[#1]{#2}{#3}
}


%===============================================================================
% ΚΕΦΑΛΑΙΟ 4: ΡΥΘΜΙΣΕΙΣ ΓΙΑ ΓΡΑΦΙΚΕΣ ΠΑΡΑΣΤΑΣΕΙΣ (PGFPLOTS/TIKZ)
%===============================================================================

%-------------------------------------------------------------------------------
% Προκαθορισμένα στυλ για PGFPlots
%-------------------------------------------------------------------------------
\pgfkeys{/pgfplots/aks_on/.style={
    axis lines=center,
    xlabel style={at={(current axis.right of origin)},xshift=1.5ex,anchor=center},
    ylabel style={at={(current axis.above origin)},yshift=1.5ex, anchor=center}
}}
\pgfkeys{/pgfplots/grafikh parastash/.style={
    line width=.4mm,
    samples=200
}}
\pgfkeys{/pgfplots/belh ar/.style={
    tick label style={font=\scriptsize},
    axis line style={-latex}
}}
\pgfkeys{/pgfplots/κεντρικοί άξονες/.style=/pgfplots/aks_on}
\pgfkeys{/pgfplots/γραφική παράσταση/.style=/pgfplots/grafikh parastash}
\pgfkeys{/pgfplots/βέλη αξόνων/.style=/pgfplots/belh ar}


%-------------------------------------------------------------------------------
% Προκαθορισμένα στυλ για TikZ
%-------------------------------------------------------------------------------
\tikzset{
  pl/.style={line width=0.3mm},
  plm/.style={line width=0.4mm},
}


%===============================================================================
% ΚΕΦΑΛΑΙΟ 5: ΑΓΚΙΣΤΡΑ (BRACES) ΓΙΑ ΣΧΟΛΙΑΣΜΟ
%===============================================================================
\newcommand{\OrizontioAgistro}[3]{\node at (#1)
{$ \overbrace{\rule{#2mm}{0mm}}^{{\scriptsize #3}} $};}
\newcommand{\KatakoryfoAgistro}[3]{\node at (#1)
{$ \underbrace{\rule{#2mm}{0mm}}_{{\scriptsize #3}} $};}
\newcommand{\PlagioAgistro}[4]{\node[rotate=#1] at (#2)
{$ \overbrace{\rule{#3mm}{0mm}}^{{\rotatebox{-#1}{\scriptsize$#4$}}}$};}

%===============================================================================
% ΚΕΦΑΛΑΙΟ 6: ΑΝΑΠΑΡΑΣΤΑΣΗ ΑΝΙΣΩΣΕΩΝ ΣΤΟΝ ΑΞΟΝΑ
%===============================================================================

%-------------------------------------------------------------------------------
% ΒΑΣΙΚΕΣ ΕΝΤΟΛΕΣ ΣΧΕΔΙΑΣΗΣ (Η αρχική σας υλοποίηση)
%-------------------------------------------------------------------------------
\newcommand{\Axonas}[2]{\draw[-latex] (#1,0) -- (#2,0)node[right]{$x$};}
\newcommand{\Diasthma}[6]{
    \foreach \x in {#3,#4} \draw (\x,0+.2) -- (\x,0-.2);
    \node[anchor=north,fill=white] at (#3,0)[below=1mm] {$ #1 $};
    \node[anchor=north,fill=white] at (#4,0)[below=1mm] {$ #2 $};
    \fill [fill=#6,opacity=.5] (#3,0)--(#3,#5)--(#4,#5)--(#4,0);
    \draw (#3,0)--(#3,#5)--(#4,#5)--(#4,0);
}
\newcommand{\Xapeiro}[5]{
    \draw (#2,0) -- (#2,-.2);
    \node[anchor=north,fill=white] at (#2,0)[below=1mm] {$ #1 $};
    \fill [fill=#5,opacity=.5] (#2,0)--(#2,#4)--(#3-.3,#4)--(#3-.3,0);
    \draw [-latex] (#2,0)--(#2,#4)--(#3-.1,#4);
}
\newcommand{\ApeiroX}[5]{
    \draw (#2,0) -- (#2,-.2);
    \node[anchor=north,fill=white] at (#2,0)[below=1mm] {$ #1 $};
    \fill [fill=#5,opacity=.5] (#2,0)--(#2,#4)--(#3+.3,#4)--(#3+.3,0);
    \draw [-latex] (#2,0)--(#2,#4)--(#3+.1,#4);
}
\tikzset{
    a/.style={decoration={markings, mark=at position #1 with {\fill[white,draw=black,thin] circle (1.4pt);}},postaction={decorate}},
    k/.style={decoration={markings, mark=at position #1 with {\fill[black] circle (1.4pt);}},postaction={decorate}},
}
\newcommand{\Akro}[2]{\draw[#1=0] (#2,0){};}

%-------------------------------------------------------------------------------
% ΠΡΟΤΑΣΗ: Νέα, ενοποιημένη εντολή \Interval
%-------------------------------------------------------------------------------
\NewDocumentCommand{\Interval}{ O{} m m }{
    \pgfkeys{ /interval/.is family, /interval,
        default/.style = {left=closed, right=closed, color=blue!30, height=0.3, label_pos=below},
        left/.store in = \lefttype, right/.store in = \righttype, color/.store in = \intcolor,
        height/.store in = \intheight, label_pos/.store in = \labelpos
    }
    \pgfkeys{/interval, default, #1}
    \fill[\intcolor, opacity=0.5] (#2,0) rectangle (#3, \intheight);
    \draw (#2,0) -- (#2,\intheight) -- (#3,\intheight) -- (#3,0);
    \ifstrequal{#2}{-\infty}{}{\node[\labelpos=1mm of #2,0] {$#2$}; \draw (#2,0.1) -- (#2,-0.1);}
    \ifstrequal{#3}{\infty}{}{\node[\labelpos=1mm of #3,0] {$#3$}; \draw (#3,0.1) -- (#3,-0.1);}
    \ifstrequal{#2}{-\infty}{}{\ifstrequal{\lefttype}{open}{\fill[white,draw=black] (#2,0) circle (1.4pt);}{\fill (#2,0) circle (1.4pt);}}
    \ifstrequal{#3}{\infty}{}{\ifstrequal{\righttype}{open}{\fill[white,draw=black] (#3,0) circle (1.4pt);}{\fill (#3,0) circle (1.4pt);}}
}

%===============================================================================
% ΚΕΦΑΛΑΙΟ 7: ΔΙΑΦΟΡΑ ΜΑΘΗΜΑΤΙΚΑ ΣΥΜΒΟΛΑ & ΕΝΤΟΛΕΣ
%===============================================================================
\newcommand{\bmath}[1]{\textbf{\boldmath{#1}}}
\DeclareMathOperator{\hm}{ημ}
\DeclareMathOperator{\syn}{συν}
\DeclareMathOperator{\ef}{εφ}
\DeclareMathOperator{\syf}{σφ}
\DeclareMathOperator{\toxhm}{ημ^{-1}}
\DeclareMathOperator{\toxsyn}{συν^{-1}}
\DeclareMathOperator{\toxef}{εφ^{-1}}
\DeclareMathOperator{\toxsyf}{σφ^{-1}}
\newcommand{\Arg}[8]{\draw[-latex] (#7,#8)-- ++(#1:#2) node[right=#5]{\footnotesize$#4$};\draw[fill=black!#6] (#7+0.3+#3,#8) arc (0:#1:0.3+#3) -- (#7,#8);}
\DeclareRobustCommand{\perthousand}{\ifmmode\text{\textperthousand}\else\textperthousand\fi}
\newcommand{\eq}[1]{\xlongequal{#1}}
\newcommand{\eqq}[2]{\xlongequal[#2]{#1}}
\DeclareMathOperator*{\Eq}{=}

%===============================================================================
% ΚΕΦΑΛΑΙΟ 8: ΔΙΑΝΥΣΜΑΤΑ
%===============================================================================
\newcommand{\Dianysma}[5][]{\tkzDefPoint(#2){#4}\tkzDefPoint(#3){#5}\tkzDrawPoint[size=2.9,fill=black](#4)\draw[line width=.3mm,-latex,#1] (#4)--(#5);}
\let\Vect\Dianysma
\newcommand{\DianysmaBold}[1]{\mathbf{#1}}
\newcommand{\DianysmaBelos}[1]{\overrightarrow{#1}}
\let\vecA\DianysmaBelos
\let\vecB\DianysmaBold
\newcommand{\GwniaDianysmatwn}[2]{( \widehat{\vec{#1}, \vec{#2}})}

%===============================================================================
% ΚΕΦΑΛΑΙΟ 9: ΓΕΩΜΕΤΡΙΚΑ ΣΧΗΜΑΤΑ & ΚΑΜΠΥΛΕΣ
%===============================================================================
\newcommand{\Ellipsh}[2]{\pgfmathsetmacro{\a}{#1}\pgfmathsetmacro{\b}{#2}\pgfmathsetmacro{\c}{sqrt(\a^2 - \b^2)}\draw[pl](axis cs:0,0) ellipse (\a cm and \b cm);\coordinate (E) at (axis cs:\c, 0);\coordinate (E') at (axis cs:-\c, 0);}
\NewDocumentCommand{\DrawEllipse}{ O{} m m }{\pgfkeys{/ellipse/.is family, /ellipse,default/.style = {draw_foci=false, label_foci=false},draw_foci/.is if=elfocidraw,label_foci/.is if=elfocilabel}\pgfkeys{/ellipse, default, #1}\pgfmathsetmacro{\a}{#2}\pgfmathsetmacro{\b}{#3}\pgfmathsetmacro{\c}{sqrt(\a^2 - \b^2)}\draw[pl](axis cs:0,0) ellipse (\a cm and \b cm);\coordinate (E) at (axis cs:\c, 0);\coordinate (E') at (axis cs:-\c, 0);\ifelfocidraw\fill (E) circle (1.5pt);\fill (E') circle (1.5pt);\fi\ifelfocilabel\node[above right=1pt of E] {$E$};\node[above left=1pt of E'] {$E'$};\fi}
\newcommand{\Parabolh}[3]{\pgfmathsetmacro{\p}{#1}\addplot [grafikh parastash,domain=-#2:#2] {\p*x^2};\coordinate (E) at (axis cs:0, 1/(4*\p)); \def\dieuthetousa{\addplot[domain=-#3:#3]{-1/(4*\p)};}}
\NewDocumentCommand{\DrawParabola}{ O{} m m m }{\pgfkeys{/parabola/.is family, /parabola,default/.style = {draw_focus=false, draw_directrix=false},draw_focus/.is if=parfocus,draw_directrix/.is if=pardirectrix}\pgfkeys{/parabola, default, #1}\pgfmathsetmacro{\p}{#2}\addplot [grafikh parastash,domain=-#3:#3] {\p*x^2};\coordinate (E) at (axis cs:0, 1/(4*\p));\ifparfocus\fill (E) circle (1.5pt) node[above right=1pt] {$E$};\fi\ifpardirectrix\addplot[dashed, domain=-#4:#4]{-1/(4*\p)};\fi}
\newcommand{\TrigwnometrikosKyklos}{\draw[-latex] (-1.2,0) -- (1.3,0) node[right,fill=white] {{\footnotesize $ x $}};\draw[-latex] (0,-1.2) -- (0,1.3) node[above,fill=white] {{\footnotesize $ y $}};\tkzDefPoint(0,0){O}\draw circle (1);\tkzLabelPoint[below left,xshift=.5mm](O){\footnotesize$ O $}}
\let\UnitCircle\TrigwnometrikosKyklos
\NewDocumentCommand{\DrawArc}{ O{line width=.4mm, blue} m m m m}{\tkzDefPoint(#2:1){#4}\tkzDefPoint(#3:1){#5}\draw[#1] (#2:1) arc (#2:#3:1);}
\let\ToksoKyklou\DrawArc

%===============================================================================
% ΚΕΦΑΛΑΙΟ 10: ΣΥΜΒΟΛΑ ΑΝΑΛΥΣΗΣ
%===============================================================================
\newcommand{\Kyrth}{\textrm{\mymath\XeTeXglyph22}}
\newcommand{\Koilh}{\textrm{\mymath\XeTeXglyph23}}
\newcommand{\Auxousa}{\textrm{\mymath\XeTeXglyph20}}
\newcommand{\Fthinousa}{\textrm{\mymath\XeTeXglyph21}}
\newcommand{\tikzAuxousa}{\tikz{\draw[-stealth, line width=0.1mm] (0,0) -- (0.4,0.4);}}
\newcommand{\tikzFthinousa}{\tikz{\draw[-stealth, line width=0.1mm] (0,0.4) -- (0.4,0);}}
\newcommand{\tikzKyrth}{\tikz{\draw[line width=0.1mm] (0,0.4) .. controls (0.2,0) and (0.3,0) .. (0.5,0.4);}}
\newcommand{\tikzKoilh}{\tikz{\draw[line width=0.1mm] (0,0) .. controls (0.2,0.4) and (0.3,0.4) .. (0.5,0);}}

%===============================================================================
% ΚΕΦΑΛΑΙΟ 11: ΔΙΑΦΟΡΕΣ ΒΟΗΘΗΤΙΚΕΣ ΕΝΤΟΛΕΣ
%===============================================================================
\newcommand{\tikzitem}{\leavevmode\vadjust{\vspace{-\baselineskip}}\newline}
\newcommand{\dintt}{\textrm{{\tiny $ {\displaystyle{\int}} $}}}
\newcommand{\dints}{\textrm{{\scriptsize $ {\displaystyle{\int}} $}}}

%===============================================================================
% ΚΕΦΑΛΑΙΟ 12: ΑΡΙΘΜΗΤΙΚΟΙ ΑΛΓΟΡΙΘΜΟΙ
%===============================================================================
\catcode`\_ 11
\def\factorize#1{\edef\factorize_N{#1}\def\factorize_exp{0}\edef\factors{{{}{}{\factorize_N}}}\factorize_i}
\def\factorize_i{\xintiiifOdd{\factorize_N}{\factorize_ii}{\edef\factorize_exp{\xintInc{\factorize_exp}}\edef\factorize_N{\xintHalf{\factorize_N}}\factorize_i}}
\def\factorize_ii{\xintiiifZero{\factorize_exp}{}{\edef\factors{\factors{{2}{\factorize_exp}{\factorize_N}}}}\xintiiifOne{\factorize_N}{}{\def\factorize_M{3}\def\factorize_exp{0}\factorize_iii}}
\def\factorize_iii{\xintAssign\xintiiDivision\factorize_N\factorize_M\to\factorize_Q\factorize_R\xintiiifSgn{\factorize_R}{}{\edef\factorize_exp{\xintInc{\factorize_exp}}\let\factorize_N\factorize_Q\factorize_iii}{\factorize_iv}}
\def\factorize_iv{\xintiiifZero{\factorize_exp}{}{\edef\factors{\factors{{\factorize_M}{\factorize_exp}{\factorize_N}}}}\xintiiifOne{\factorize_N}{}{\xintiiifLt\factorize_M\factorize_Q{\edef\factorize_M{\xintiiAdd\factorize_M 2}\def\factorize_exp{0}\factorize_iii}{\edef\factors{\factors{{\factorize_N}{1}{1}}}}}}
\catcode`\_ 8
\makeatletter
\def\@factorinliner  #1{\@factorinliner@ #1}
\def\@factorinliner@ #1#2#3{\ifnum #2>1 \expandafter\@firstoftwo\else\expandafter\@secondoftwo\fi{{#1}^{#2}}{#1}}
\newcommand*{\Analyshseprwtous}[1]{\factorize{#1}\xintListWithSep\cdot{\xintApply\@factorinliner{\expandafter\@gobble\factors}}}
\makeatother
\let\PrimeFactorize\Analyshseprwtous
\newcommand\Analyshseprwtouskatheta[2][nil]{\begingroup\opset{#1}\opcopy{#2}{NbtoDecompose}\opabs{NbtoDecompose}{NbtoDecompose}\opinteger{NbtoDecompose}{NbtoDecompose}\opcmp{NbtoDecompose}{0}\ifopeq Error: Factorizing zero is not possible.\else\setbox1=\hbox{\opdisplay{operandstyle.1}{NbtoDecompose}}\setbox2=\vbox{}\count255=1\primeindex=0\loop\opcmp{NbtoDecompose}{1}\ifopneq\opidiv*{NbtoDecompose}{P\the\primeindex}{q}{r}\opcmp{0}{r}\ifopeq\ifvoid2\setbox2=\hbox{\opdisplay{intermediarystyle.\the\count255}{P\the\primeindex}}\else\setbox2=\vtop{\unvbox2\hbox{\opdisplay{intermediarystyle.\the\count255}{P\the\primeindex}}}\fi\opcopy{q}{NbtoDecompose}\advance\count255 by1\setbox1=\vtop{\unvbox1\hbox{\opdisplay{operandstyle.\the\count255}{NbtoDecompose}}}\else\advance\primeindex by1\fi\repeat\hbox{\box1\kern0.5\opcolumnwidth\opvline(0,0.75){\the\count255.25}\kern0.5\opcolumnwidth\box2}\fi\endgroup}
\let\PrimeFactorizeVertical\Analyshseprwtouskatheta
\newcount\primeindex\newcount\tryindex\newif\ifprime\newif\ifagain
\newcommand\vresprwtous[1]{\opcopy{2}{P0}\opcopy{3}{P1}\opcopy{5}{try}\primeindex=2\loop\ifnum\primeindex<#1\relax\testprimality\ifprime\opcopy{try}{P\the\primeindex}\advance\primeindex by1\fi\opadd*{try}{2}{try}\ifnum\primeindex<#1\relax\testprimality\ifprime\opcopy{try}{P\the\primeindex}\advance\primeindex by1\fi\opadd*{try}{4}{try}\fi\repeat}
\newcommand\testprimality{\begingroup\againtrue\global\primetrue\tryindex=0\loop\opidiv*{try}{P\the\tryindex}{q}{r}\opcmp{r}{0}\ifopeq\global\primefalse\againfalse\fi\opcmp{q}{P\the\tryindex}\ifoplt\againfalse\fi\advance\tryindex by1\ifagain\repeat\endgroup}
\newcolumntype{C}[1]{>{\centering$}p{#1}<{$}}
\ExplSyntaxOn
\bool_new:N \l_silke_show_bool\seq_new:N \l_silke_top_seq\seq_new:N \l_silke_middle_seq\seq_new:N \l_silke_bottom_seq\tl_new:N \l_silke_remainder_tl
\NewDocumentCommand{\Horner}{sO{2em}mm}{\IfBooleanTF{#1}{\bool_set_false:N \l_silke_show_bool}{\bool_set_true:N \l_silke_show_bool}\silke_horner:nnn { #2 } { #3 } { #4 }}
\cs_new_protected:Npn \silke_horner:nnn #1 #2 #3 {\seq_set_split:Nnn \l_silke_top_seq { , } { #2 }\int_set:Nn \l_silke_degree_int { \seq_count:N \l_silke_top_seq }\seq_clear:N \l_silke_middle_seq\seq_clear:N \l_silke_bottom_seq\seq_put_right:Nn \l_silke_middle_seq { \cellcolor{black} }\seq_put_right:Nx \l_silke_bottom_seq { \int_to_arabic:n { \seq_item:Nn \l_silke_top_seq { 1 } } }\int_step_inline:nnnn { 2 } { 1 } { \l_silke_degree_int }{\seq_put_right:Nx \l_silke_middle_seq{ \int_to_arabic:n { \seq_item:Nn \l_silke_bottom_seq { ##1 - 1 } * #3 } }\seq_put_right:Nx \l_silke_bottom_seq{ \int_to_arabic:n { \seq_item:Nn \l_silke_top_seq { ##1 } + \seq_item:Nn \l_silke_middle_seq { ##1 } } }}\silke_print_scheme:nn { #1 } { #3 }}
\cs_new_protected:Npn \silke_print_scheme:nn #1 #2 {\bool_if:NF \l_silke_show_bool{\seq_map_inline:Nn \l_silke_middle_seq { \tl_set:Nn \l_tmpa_tl { \phantom{##1} } }\seq_map_inline:Nn \l_silke_bottom_seq { \tl_set:Nn \l_tmpb_tl { \phantom{##1} } }}\seq_pop_right:NN \l_silke_bottom_seq \l_silke_remainder_tl\begin{tabular}{ *{\int_eval:n {\l_silke_degree_int-1}}{|C{#1}} || C{#1} | C{#1} | }\hline \rule[-1ex]{0pt}{4ex}\seq_use:Nn \l_silke_top_seq { & } & #2 \tabularnewline\hline \rule[-1ex]{0pt}{4ex}\seq_use:Nn \l_silke_middle_seq { & } \tabularnewline\cline{1-\l_silke_degree_int} \rule[-1ex]{0pt}{4ex}\seq_use:Nn \l_silke_bottom_seq { & } &{\mathbf{\l_silke_remainder_tl}} \tabularnewline\cline{1-\l_silke_degree_int}\end{tabular}}
\ExplSyntaxOff
\let\ΣχήμαHorner\Horner

%===============================================================================
% ΚΕΦΑΛΑΙΟ 13: ΠΙΝΑΚΕΣ, ΕΙΔΙΚΕΣ ΣΥΝΑΡΤΗΣΕΙΣ & ΠΡΟΧΩΡΗΜΕΝΗ ΓΕΩΜΕΤΡΙΑ
%===============================================================================

%-------------------------------------------------------------------------------
% ΕΠΑΥΞΗΜΕΝΟΣ ΠΙΝΑΚΑΣ (AUGMENTED MATRIX)
%-------------------------------------------------------------------------------
% --- ΑΝΑΛΥΣΗ ---
% Δημιουργεί ένα νέο "περιβάλλον" (environment) με το όνομα 'amatrix'.
% Χρήση:
% \begin{amatrix}{<αριθμός στηλών πριν τη γραμμή>}
%   a & b & c \\
%   d & e & f \\
% \end{amatrix}
% Το #1 ορίζει πόσες στήλες θα έχει ο αριστερός πίνακας, πριν την κάθετη γραмμή.
\newenvironment{amatrix}[1]{%
    \left(\begin{array}{@{}*{#1}{c}|c@{}}
}{%
    \end{array}\right)
}
\let\AugmentedMatrix\amatrix

%-------------------------------------------------------------------------------
% ΕΙΔΙΚΕΣ ΣΥΝΑΡΤΗΣΕΙΣ
%-------------------------------------------------------------------------------
% --- ΑΝΑΛΥΣΗ ---
% Παρέχει συντομεύσεις για τη στοιχειοθεσία γνωστών ειδικών συναρτήσεων
% των ανώτερων μαθηματικών. Είναι πολύ χρήσιμες για ακαδημαϊκά κείμενα.
\newcommand{\BetaFun}[2]{\mathrm{B}(#1,#2)=\int_{0}^{1}{t^{#1-1}(1-t)^{#2-1}\,\mathrm{d}t}}
\newcommand{\GammaFun}[1]{\Gamma(#1)=\int_{0}^{\infty}{x^{#1-1}e^{-x}\,\mathrm{d}x}}
\newcommand{\ErrorFun}[1]{\mathrm{erf}(#1)=\frac{2}{\sqrt{\pi}}\int_{0}^{#1}{e^{-t^2}\,\mathrm{d}t}}
\newcommand{\ErrorCFun}[1]{\mathrm{erfc}(#1)=\frac{2}{\sqrt{\pi}}\int_{#1}^{\infty}{e^{-t^2}\,\mathrm{d}t}}
\newcommand{\SiInt}[1]{\mathrm{Si}(#1)=\int_{0}^{#1}{\frac{\sin{t}}{t}}\,\mathrm{d}t}
\newcommand{\CiInt}[1]{\mathrm{Ci}(#1)=-\int_{#1}^{\infty}\frac{\cos t}{t}\mathrm{d}t}
\newcommand{\ZetaFun}[1]{\zeta(#1)=\sum_{n=1}^{\infty}{\frac{1}{n^#1}}}
\newcommand{\DawsonInt}[1]{F\left(#1\right)=e^{-#1^{2}}\int_{0}^{#1}e^{t^{2}}\mathrm{d}t}

%-------------------------------------------------------------------------------
% ΣΩΣΤΗ ΣΤΟΙΧΕΙΟΘΕΣΙΑ ΔΙΑΦΟΡΙΚΟΥ (d)
%-------------------------------------------------------------------------------
% --- ΑΝΑΛΥΣΗ ---
% Αυτή είναι μια πολύ καλή πρακτική. Επαναπροσδιορίζει την εντολή \d
% (που συνήθως είναι ένας τονισμός) ώστε να παράγει ένα όρθιο 'd' για το
% διαφορικό στα ολοκληρώματα, με σωστή απόσταση.
% Το \AtBeginDocument διασφαλίζει ότι η αλλαγή θα γίνει αφού έχουν φορτωθεί
% όλα τα πακέτα, αποφεύγοντας xungkrούσεις.
\AtBeginDocument{\renewcommand*{\d}{\mathop{\kern0pt\mathrm{d}}\!{}}}

%-------------------------------------------------------------------------------
% ΣΧΕΔΙΑΣΗ ΜΗΝΙΣΚΟΥ (LUNE)
%-------------------------------------------------------------------------------
% --- ΑΝΑΛΥΣΗ ---
% Αυτή είναι μια πολύ προχωρημένη εντολή TikZ για τη σχεδίαση ενός μηνίσκου,
% δηλαδή της περιοχής που ορίζεται από την τομή δύο κύκλων.
\newcommand{\Miniskos}[7][]{
    \coordinate (#6) at (#2);
    \coordinate (#7) at (#3);
    \begin{scope}[overlay]
        \path [name path=#6] (#6) circle [radius=#4];
        \path [name path=#7] (#7) circle [radius=#5];
        \path [name intersections={of=#6 and #7, by={p1,p2}}];
    \end{scope}
    \filldraw [#1] let
        \p1=(#6),\p2=(#7),\p3=(p1),\p4=(p2),
        \n1={veclen(\x3-\x1,\y3-\y1)},
        \n2={atan2(\y3-\y1,\x3-\x1)}, \n3={atan2(\y4-\y1,\x4-\y1)},
        \n4={veclen(\x3-\x2,\y3-\y2)},
        \n5={atan2(\y3-\y2,\x3-\x2)}, \n6={atan2(\y4-\y2,\x4-\x2)} in
        ($(#6)+(\n2:\n1)$) arc (\n2:\n3:\n1) arc(\n6:\n5:\n4) -- cycle;
}
\let\Lune\Miniskos

%-------------------------------------------------------------------------------
% PATCH ΓΙΑ ΣΥΜΒΑΤΟΤΗΤΑ MATHTOOLS ΚΑΙ MTPRO2
%-------------------------------------------------------------------------------
% --- ΑΝΑΛΥΣΗ ---
% Αυτός ο κώδικας είναι ένα "μπάλωμα" (patch) που διορθώνει τη συμπεριφορά
% των περιβαλλόντων dcases, rcases κλπ. του 'mathtools' όταν χρησιμοποιούνται
% μαζί με το πακέτο γραμματοσειρών 'mtpro2' (MathTime Professional 2).
\makeatletter
\newsavebox{\mtp@casesbox}
\MHInternalSyntaxOn
\MH_if_meaning:NN \mtp@br c \expandafter\@firstofone \MH_else: \expandafter\@gobble \MH_fi:{
  \def\MTP_MT_start_cases:nnn #1#2#3{ \RIfM@\else\nonmatherr@{\begin{\@currenvir}}\fi \MH_group_align_safe_begin: \setbox\mtp@casesbox=\hbox\bgroup$\vcenter \bgroup \Let@ \chardef\dspbrk@context\@ne \restore@math@cr \let  \math@cr@@\AMS@math@cr@@ \spread@equation \ialign\bgroup \strut@#2 &#1\strut@ #3 \crcr }
  \def\MTP_MH_end_cases:{\crcr\egroup \restorecolumn@ \egroup $\egroup \MH_group_align_safe_end:}
  \newcommand*\mtp@newcases[6]{\newenvironment{#1}{\MTP_MT_start_cases:nnn {#2}{#3}{#4}}{\MTP_MH_end_cases:\LEFTRIGHT#5#6{\copy\mtp@casesbox}}}
  \newcommand*\mtp@renewcases[6]{\renewenvironment{#1}{\MTP_MT_start_cases:nnn {#2}{#3}{#4}}{\MTP_MH_end_cases:\LEFTRIGHT#5#6{\copy\mtp@casesbox}}}
  \mtp@renewcases{dcases}{\quad}{$\m@th\displaystyle{##}$\hfil}{$\m@th\displaystyle{##}$\hfil}{\lbrace}{.}
  \mtp@renewcases{dcases*}{\quad}{$\m@th\displaystyle{##}$\hfil}{{##}\hfil}{\lbrace}{.}
  \mtp@newcases{cdcases}{\quad}{$\m@th\hfil\displaystyle{##}$\hfil}{$\m@th\displaystyle{##}$\hfil}{\lbrace}{.}
  \mtp@newcases{cdcases*}{\quad}{$\m@th\hfil\displaystyle{##}$\hfil}{{##}\hfil}{\lbrace}{.}
  \mtp@renewcases{rcases}{\quad}{$\m@th{##}$\hfil}{$\m@th{##}$\hfil}{.}{\rbrace}
  \mtp@renewcases{rcases*}{\quad}{$\m@th{##}$\hfil}{{##}\hfil}{.}{\rbrace}
  \mtp@renewcases{drcases}{\quad}{$\m@th\displaystyle{##}$\hfil}{$\m@th\displaystyle{##}$\hfil}{.}{\rbrace}
  \mtp@renewcases{drcases*}{\quad}{$\m@th\displaystyle{##}$\hfil}{{##}\hfil}{.}{\rbrace}
  \mtp@renewcases{cases*}{\quad}{$\m@th{##}$\hfil}{{##}\hfil}{\lbrace}{.}
}
\MHInternalSyntaxOff
\makeatother

%===============================================================================
% ΤΕΛΟΣ ΠΑΚΕΤΟΥ MATHIMATIKA
%===============================================================================

